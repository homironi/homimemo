---
layout: base.njk
eleventyNavigation:
    parent: カテゴリ一覧
    order: 0
---

{# css #}
{% block css -%}
<link rel="stylesheet" href="/styles/categoryListLayout.css" />
<link rel="stylesheet" href="/styles/categoryListThema.css" />
{# カードのcss #}
<link rel="stylesheet" href="/styles/cardLayout.css" />
<link rel="stylesheet" href="/styles/cardThema.css" />
{%- endblock%}

<main class="mainContainer">
    <div class = "sideLWrapper">
    </div>
    <div class="contentWrapper">
        <category class="categoryInner">
            <section class="categoryHeader">
                {% include "breadcrumb.njk" %}
                <h1>{{title}}カテゴリ一覧</h1>
                {# 説明などをここに #}
                {{description}}
                {{content | safe}}
            </section>
            <section class="content">
                <div class ="postListsWrapper">
                    <section class = "postList">
                        {# このカテゴリの記事一覧 #}
                        {% set startNum = posts.length * pagination.pageNumber %}
                        {% set endNum = startNum + posts.length %}
                        {# 新しい順で先頭に来るように処理したいので逆順にする #}
                        {% set postList = collections[category] | dateLatest | reverse | slice(startNum, endNum)%}
                        {% import "card.njk" as card %}
                        {%- for post in postList  %}
                            {{card.card(post)}}
                        {%- endfor %}
                    </section>
                </div>
                {# ページ移動のリンク #}
                <nav class = "pagiNav">
                    {# 最初のページ #}
                    <li>{% if page.url != pagination.href.first %}<a href={{ pagination.href.first }}>1</a>{% endif %}</li>
                    {# 前のリンクと最初のページの数の差が2位上なら表示 #}
                    {% set preNum = pagination.pageNumber - 1 + 1 %}
                    {% if preNum - 1 > 1 %}
                    <li class = "between">…</li>
                    {% endif %}
                    {# 一つ前のページ #}
                    {% if pagination.href.previous != pagination.href.first %}
                    <li>
                        {% if (pagination.href.previous) %}
                        <a href={{ pagination.href.previous }}>{{ preNum }}</a>
                        {% endif %}
                    </li>
                    {% endif %}
                    {# このページのリンク #}
                    <li class = "current"><a href={{ pagination.hrefs[ pagination.pageNumber ] }}>{{ pagination.pageNumber + 1 }}</a></li>
                    {# 一つ次のページ #}
                    {% if pagination.href.next != pagination.href.last %}
                    <li>
                        {% set nextNum = pagination.pageNumber + 1 + 1 %}
                        {% if pagination.href.next %}
                        <a href={{ pagination.href.next }}>{{ nextNum }}</a>
                        {% endif %}
                    </li>
                    {% endif %}
                    {# 次のリンクと最後のページの数の差が2位上なら表示 #}
                    {% if pagination.hrefs.length - nextNum > 1 %}
                    <li class = "between">…</li>
                    {% endif %}
                    {# 最後のページ #}
                    <li>
                        {% if page.url != pagination.href.last %}
                        <a href={{ pagination.href.last }}>{{pagination.hrefs.length}}</a>
                        {% endif %}
                    </li>
                </nav>
                {# ページの共有ボタン #}
                {% include "shareButtons.njk" %}
            </section>
        </category>
    </div>
    <div class = "sideRWrapper">
    </div>
</main>