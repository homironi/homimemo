---
id: 93n1rqxpt801pqg3cdozcl2s
title: ã²ã‚ˆã£ã“ã¨è¦‹ã‚‹forwardRefã¨useRef
description: >-
  ä»Šå›ã¯ã²ã‚ˆã£ã“ã¨ã„ã£ã—ã‚‡ã«forwardRefã¨useRefã‚’è¦‹ã¦ã„ãã¾ã™ã€‚ãƒ‡ã‚¸ã‚¿ãƒ«åºã®Storybookã‚’è¦‹ã¦ã„ã¦åˆã‚ã¦è¦‹ãŸforwardRefã¨åå‰ã—ã‹ã‚ã‹ã£ã¦ã„ãªã‹ã£ãŸuseRefã‚’èª¿ã¹ã¾ã—ãŸï¼
publishDate: 2025-03-22T00:00:00.000+09:00
lastModDate: 2025-03-22T00:00:00.000+09:00
draft: false
category: Webåˆ¶ä½œ
tags:
  - Next.js
  - React
thumbnail: /images/header/categories/makeWeb/8.webp
---

## ğŸ¤ ã¯ã˜ã‚ã«

Component ã®å®šç¾©ã®ã‚»ã‚ªãƒªãƒ¼ã‚’çŸ¥ã‚‹ãŸã‚ã«ã€æœ€è¿‘[ãƒ‡ã‚¸ã‚¿ãƒ«åºã® Storybook ã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/digital-go-jp/design-system-example-components/tree/main) ã‚’è¦‹ã¦ã„ã¾ã™ã€‚

ä»Šå›ã¯ãã®ä¸­ã§åˆã‚ã¦ã¿ãŸ`forwardRef`ã¨ã€åå‰ã¯çŸ¥ã£ã¦ãŸã‘ã©ä½¿ã£ãŸã“ã¨ãŒãªã‹ã£ãŸ`useRef`ã«ã¤ã„ã¦èª¿ã¹ã¾ã—ãŸã€‚

è¦‹ã¦ã„ãŸã®ã¯[Button](https://github.com/digital-go-jp/design-system-example-components/blob/main/src/components/Button/Button.tsx)ã§ã™

<TextBlock blockType="info">
å…ˆã«æ›¸ã„ã¦ãŠãã¾ã™ãŒã€`forwardRef`ã¯ React19 ã‹ã‚‰éæ¨å¥¨ã§ã™ã€‚  
React19 ä»¥é™ã¯ props ã§ ref ã‚’ä½¿ãˆã‚‹ã‚‰ã—ã„ã®ã§ã€ãã¡ã‚‰ã‚’ä½¿ã†ã®ãŒè‰¯ã„ã§ã—ã‚‡ã†ã€‚
</TextBlock>

## âœ…ï¸ ã“ã®è¨˜äº‹ã§ã‚ã‹ã‚‹ã“ã¨

-   `forwardRef`ã£ã¦ãªã«ï¼Ÿ
-   `useRef`ã£ã¦ãªã«ï¼Ÿ
-   React19 ã‹ã‚‰`forwardRef`ã¯éæ¨å¥¨ã‚‰ã—ã„ã‘ã©ã€Next.js ã§ã¯ï¼Ÿ

{/*.list .checkBox*/}

## ğŸ”ï¸ forwardRef ã£ã¦ãªã«ï¼Ÿ

React å…¬å¼ãƒšãƒ¼ã‚¸ï¼š[forwardRef](https://ja.react.dev/reference/react/forwardRef)

> React 19 ã§ã¯ã€`forwardRef` ã¯ä¸è¦ã¨ãªã‚Šã¾ã—ãŸã€‚ä»£ã‚ã‚Šã« props ã¨ã—ã¦ `ref` ã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚

React19 ã‹ã‚‰ã¯éæ¨å¥¨ã«ãªã£ã¦ã„ã‚‹ã¿ãŸã„ã§ã™ã­ã€‚

ğŸ¤ã€ŒçŸ¥ã‚‹ã®ãŒé…ã‹ã£ãŸã‹â€¦â€¦ã€

> `forwardRef` ã¯ã€è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¯¾ã—ã¦ DOM ãƒãƒ¼ãƒ‰ã‚’ [ref](https://ja.react.dev/learn/manipulating-the-dom-with-refs) ã¨ã—ã¦å…¬é–‹ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ğŸ¤ã€Œãã‚‚ãã‚‚`ref`ãŒã‚ã‚‹ã¨ãªã«ãŒå¬‰ã—ã„ã‚“ã ã‚ã†â€¦â€¦ï¼Ÿã€

## ğŸ¤” ãã‚‚ãã‚‚ `useRef` ã‚‚ã‚ã‚“ã¾ã‚ã‹ã£ã¦ãªã„

ã¨ã„ã†ã“ã¨ã§ä¸€æ—¦`useRef`ã‚’èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚

React å…¬å¼ãƒšãƒ¼ã‚¸ï¼š[useRef](https://ja.react.dev/reference/react/useRef)

### render ã«ä½¿ç”¨ã—ãªã„å€¤ã®ç®¡ç†ã«ä½¿ã†ï¼Ÿ

ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰ã‚¢ãƒ©ãƒ¼ãƒˆã§è¡¨ç¤ºã™ã‚‹ã‚¯ãƒªãƒƒã‚¯å›æ•°ãŒä¾‹ã«å‡ºã¦ã„ã¾ã—ãŸã€‚  
â–¶ [useRef ã‚’ç”¨ã„ã¦å€¤ã‚’å‚ç…§ã™ã‚‹ä½¿ç”¨ä¾‹ ï¼ ä¾‹ 1/2: ã‚¯ãƒªãƒƒã‚¯ã‚«ã‚¦ãƒ³ã‚¿ ](https://ja.react.dev/reference/react/useRef#click-counter)

### ref ã®å€¤ã®å¤‰æ›´ã§å† render ãŒèµ°ã‚‰ãªã„

`useRef`ã®å€¤ãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚å† render ã¯èµ°ã‚‰ãªã„ãã†ã§ã™ã€‚  
ãã®ãŸã‚ã€è¡¨ç¤ºã«ç”¨ã„ãªã„å€¤ã‚’ä¿å­˜ã™ã‚‹ã“ã¨ã«ä½¿ç”¨ã•ã‚Œã‚‹ã¿ãŸã„ã§ã™ã€‚

ä¾‹ãˆã°[useRef ã‚’ç”¨ã„ã¦å€¤ã‚’å‚ç…§ã™ã‚‹ä½¿ç”¨ä¾‹ ï¼ ä¾‹ 1/2: ã‚¯ãƒªãƒƒã‚¯ã‚«ã‚¦ãƒ³ã‚¿ ](https://ja.react.dev/reference/react/useRef#click-counter)ãªã‚‰ã€button ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«`alert`ã§ã‚¯ãƒªãƒƒã‚¯å›æ•°ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã¯ render ã«ã¯ä½¿ç”¨ã•ã‚Œã¦ãŠã‚‰ãšã€`alert`ã®æ–‡å­—åˆ—ã«æ¸¡ã™å ´åˆã®ã¿ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ğŸ¤ã€Œä»–ã§ render ã«ä½¿ã‚ãªã„å ´åˆã¯`useState`ã§ã¯ãªãã€`useRef`ã‚’ä½¿ã†ã¨å† render ãŒèµ°ã‚‰ãªã„ã®ã§è‰¯ã„ã€ã¨ã„ã†ã“ã¨ã¿ãŸã„ã§ã™ã­ã€

é€†ã«ã€å€¤ãŒå¤‰ã‚ã£ã¦ã‚‚å† render ãŒèµ°ã‚‰ãªã„ã®ã§ã€render ã«ä½¿ç”¨ã™ã‚‹ãªã‚‰ `useState`ã‚’ä½¿ã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  
render ã§ä½¿ç”¨ã™ã‚‹å€¤ãªã®ã‹ã©ã†ã‹ãŒ`useState`ã¨`useRef`ã©ã¡ã‚‰ã‚’ä½¿ã†ã‹ã®åˆ¤æ–­åŸºæº–ã«ãªã‚Šãã†ã§ã™ã€‚

### DOM æ“ä½œã§ã‚ˆãä½¿ã†ï¼Ÿ

â–¶ [ref ã§ DOM ã‚’æ“ä½œã™ã‚‹](https://ja.react.dev/learn/manipulating-the-dom-with-refs)

```tsx
import { useRef } from "react";

export default function Form() {
    const inputRef = useRef(null);

    function handleClick() {
        inputRef.current.focus();
    }

    return (
        <>
            <input ref={inputRef} />
            <button onClick={handleClick}>Focus the input</button>
        </>
    );
}
```

ä¸Šè¨˜ã®ã‚ˆã†ãª`Form`Component ã§ã¯ã€`useRef`ã®`inputRef`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«`input`ã®å‚ç…§ãŒå…¥ã‚Šã¾ã™ã€‚  
ãã—ã¦ã€`button`ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨`inputRef.current.focus();`ã«ã‚ˆã£ã¦`inputRef`ã«å…¥ã£ã¦ã„ã‚‹å‚ç…§ã€ã™ãªã‚ã¡`input`è¦ç´ ã« focus ã•ã‚Œã‚‹ã€ã¨ã„ã†ã“ã¨ã¿ãŸã„ã§ã™ã€‚

ã“ã†ã„ã£ãŸä½¿ã„æ–¹ã§ã‚ˆãä½¿ç”¨ã•ã‚Œã‚‹ã®ãŒã€`useRef`ã¨`ref`ã‚‰ã—ã„ã§ã™ã­ã€‚

## ğŸ’¡ æ”¹ã‚ã¦ forwardRef ã£ã¦ãªã«ï¼Ÿ

-   [React ã® forwardRef ã¯ãªãœå¿…è¦ã§ã€ã„ã¤ä½¿ã†ã¹ãã‹](https://qiita.com/odendayoko/items/e1c5d3b2abdaa02cbea0)
-   [è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« DOM ãƒãƒ¼ãƒ‰ã‚’å…¬é–‹ã™ã‚‹](https://ja.react.dev/reference/react/forwardRef#exposing-a-dom-node-to-the-parent-component)

ã€Œç‹¬è‡ªå®šç¾©ã® Component ã«ã¯é€šå¸¸ã¯ `ref={hogeRefObject}`ãŒæ¸¡ã›ãªã„ â‡’ è¦ªã«ç‹¬è‡ªå®šç¾© Component å†…ã®è¦ç´ ã‚’å…¬é–‹ã§ããªã„ã€  
ã¨ã„ã†ã“ã¨ã§`forwardRef`ãŒç™»å ´ã™ã‚‹ã¿ãŸã„ã§ã™ã€‚

â–¼ ã“ã†ã„ã†æ„Ÿã˜ã§ Component ã‚’å®šç¾©ï¼ˆå¼•ç”¨ï¼š[React ã® forwardRef ã¯ãªãœå¿…è¦ã§ã€ã„ã¤ä½¿ã†ã¹ãã‹](https://qiita.com/odendayoko/items/e1c5d3b2abdaa02cbea0)ï¼‰

```tsx
import { forwardRef } from "react";

const MyInput = forwardRef(function MyInput(props, ref) {
    const { label, ...otherProps } = props;
    return (
        <label>
            {label}
            <input {...otherProps} ref={ref} />
        </label>
    );
});
```

â–¼ ã®ã‚ˆã†ãªæ„Ÿã˜ã§ä½¿ç”¨ã§ãã‚‹ã‚‰ã—ã„

```tsx
function Form() {
    const ref = useRef(null);

    function handleClick() {
        ref.current.focus();
    }

    return (
        <form>
            <MyInput label="Enter your name:" ref={ref} />
            <button type="button" onClick={handleClick}>
                Edit
            </button>
        </form>
    );
}
```

1. `Form`ã®`ref`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«`MyInput`ã®`input`ã®å‚ç…§ãŒå…¥ã‚‹
2. `Form`ã®`button`ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã‚‹ã¨ã€`ref`ã« focus
3. `ref`ã«ã¯ã€Œ`MyInput`ã®`input`ã®å‚ç…§ã€ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ã€ã€Œ`MyInput`ã®`input`ã®å‚ç…§ã€ã« focus

ã¨ã„ã†ã“ã¨ãŒã§ãã‚‹ã¿ãŸã„ã§ã™ï¼

## âš ï¸ React19 ã‹ã‚‰ forwardRef ã¯éæ¨å¥¨ã«ãªã‚‹ã‚‰ã—ã„

â–¶ [`ref` ãŒ props ã«](https://ja.react.dev/blog/2024/12/05/react-19#ref-as-a-prop)

React19 ã‹ã‚‰ã¯é–¢æ•° Component ã§ ref ã« props ã¨ã—ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚ˆã†ã§ã™ã€‚

ä»Šå›`forwardRef`ãŒç™»å ´ã™ã‚‹è¦å› ã¨ãªã£ã¦ã„ãŸã€Œç‹¬è‡ªå®šç¾©ã® Component å†…ã®è¦ç´ ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ refã€ã¨ã„ã†ã‚‚ã®ãŒã€  
ãã‚‚ãã‚‚ props ã§ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã€ä¸è¦ã«ãªã‚‹ã¨ã„ã†ã“ã¨ã¿ãŸã„ã§ã™ã­ã€‚

ä»Šå¾Œã€DOM æ“ä½œãªã©ã§ç‹¬è‡ªå®šç¾© Component ã«`ref`ã‚’æ¸¡ã—ãŸããªã£ãŸã‚‰ã€props ã«æ¸¡ã›ã°è‰¯ã„ã¿ãŸã„ã§ã™ï¼

â–¼ [`ref` ãŒ props ã«](https://ja.react.dev/blog/2024/12/05/react-19#ref-as-a-prop)ã‚ˆã‚Š

```tsx
function MyInput({ placeholder, ref }) {
    return <input placeholder={placeholder} ref={ref} />;
}

//...
<MyInput ref={ref} />;
```

## âš›ï¸ Next.js ã§ React19 ã¯ä½¿ãˆã‚‹ï¼Ÿ

æœ€è¿‘ã€Next.js ã‚’è§¦ã£ã¦ã„ã‚‹ã®ã§ã€æ°—ã«ãªã£ã¦èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚

çµè«–ã¨ã—ã¦ã€ Next.js 15.1 ã‹ã‚‰ä½¿ãˆã‚‹ã¿ãŸã„ã§ã™ï¼  
â–¶ [Next.js 15.1 ï¼ React 19 (å®‰å®šç‰ˆ)](https://nextjs.org/blog/next-15-1#react-19-stable)

Next.js ã§ DOM æ“ä½œã‚’ã—ãŸã„æ™‚ã‚‚ 15.1 ä»¥ä¸Šã§ã‚ã‚Œã°ã€ forwardRef ã‚’ä½¿ã‚ãªãã¦ã‚ˆã•ãã†ã§ã™ã­ï¼

## ğŸ¤ ã¾ã¨ã‚

-   `forwardRef`ã£ã¦ãªã«ï¼Ÿ
    -   ç‹¬è‡ªå®šç¾© Component ã«`ref`ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®
    -   ãŸã ã€React19 ã‹ã‚‰ã¯éæ¨å¥¨ã«ãªã‚‹
    -   React19 ã‹ã‚‰ã¯ props ã§ `ref`ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã‚‹ã®ã§ã€ãã¡ã‚‰ã®æ‰‹æ®µã‚’ä½¿ã†ï¼
-   `useRef`ã£ã¦ãªã«ï¼Ÿ
    -   ã“ã®å€¤ãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚ã€å† render ãŒèµ°ã‚‰ãªã„
    -   â†‘ ã‚’åˆ©ç”¨ã—ã¦ã€render ã«ä½¿ç”¨ã—ãªã„ï¼ˆå† render ã•ã‚Œã‚‹å¿…è¦ãŒãªã„ï¼‰å€¤ã®ç®¡ç†ã«ä½¿ç”¨ã•ã‚Œã‚‹
    -   ç‰¹ã«ã€DOM æ“ä½œã®ãŸã‚ã«`ref`ã‚’ä½¿ã†å ´åˆã«ã‚ˆãä½¿ã‚ã‚Œã‚‹
    -   `button`ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã€`ref`ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ã—ãŸåˆ¥ã® DOMï¼ˆä¾‹ãˆã°`input`ï¼‰ã« focus ã™ã‚‹ã€ã¨ã„ã†ã‚ˆã†ãªã“ã¨ãŒã§ãã‚‹ï¼
-   React19 ã‹ã‚‰`forwardRef`ã¯éæ¨å¥¨ã‚‰ã—ã„ã‘ã©ã€Next.js ã§ã¯ï¼Ÿ
    -   Next.js ã® 15.1 ä»¥ä¸Šã§ React19 ã«å¯¾å¿œæ¸ˆ
    -   Next.js15.1 ä»¥ä¸Šã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€`forwardRef`ã§ã¯ãªãã€props ã«æ¸¡ã›ã°è‰¯ã„ï¼

## è¨˜äº‹ã«é–¢ä¿‚ãªã„è©±

æœ€è¿‘ã€ChatGPT ã«çµµæ–‡å­—ã‚’ãŸãã•ã‚“ä½¿ã£ã¦ã‚‚ã‚‰ã†ã®ã«ãƒãƒã£ã¦ã„ã¾ã™ã€‚  
ã‹ã‚ã„ã„ãªã€ã¨æ€ã£ã¦çµµæ–‡å­—ã‚’ãŸãã•ã‚“ä½¿ã£ã¦è³‘ã‚„ã‹ã«ã—ã¦ã‚‚ã‚‰ã£ã¦ã„ã¾ã™ã€‚

ä»Šå›ã¯ã›ã£ã‹ããªã®ã§è¨˜äº‹ã®è¦‹å‡ºã—ã«çµµæ–‡å­—ã‚’ã¤ã‘ã¦ã¿ã¾ã—ãŸã€‚

[Noto Color Emoji](https://fonts.google.com/noto/specimen/Noto+Color+Emoji)ã‚’ä½¿ã†ã‚ˆã†ã«ã—ãŸã‚‰ã‚‚ã£ã¨ã‹ã‚ã„ããªã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ  
æ¤œè¨ä¸­ã§ã™ï¼

## ğŸ“– å‚è€ƒ

-   [ãƒ‡ã‚¸ã‚¿ãƒ«åºã® Storybook ã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/digital-go-jp/design-system-example-components/tree/main)
-   [ãƒªãƒã‚¸ãƒˆãƒªã® Button](https://github.com/digital-go-jp/design-system-example-components/blob/main/src/components/Button/Button.tsx)
-   [forwardRef](https://ja.react.dev/reference/react/forwardRef)
-   [useRef](https://ja.react.dev/reference/react/useRef)
-   [useRef ã‚’ç”¨ã„ã¦å€¤ã‚’å‚ç…§ã™ã‚‹ä½¿ç”¨ä¾‹ ï¼ ä¾‹ 1/2: ã‚¯ãƒªãƒƒã‚¯ã‚«ã‚¦ãƒ³ã‚¿ ](https://ja.react.dev/reference/react/useRef#click-counter)
-   [ref ã§ DOM ã‚’æ“ä½œã™ã‚‹](https://ja.react.dev/learn/manipulating-the-dom-with-refs)
-   [React ã® forwardRef ã¯ãªãœå¿…è¦ã§ã€ã„ã¤ä½¿ã†ã¹ãã‹](https://qiita.com/odendayoko/items/e1c5d3b2abdaa02cbea0)
-   [è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« DOM ãƒãƒ¼ãƒ‰ã‚’å…¬é–‹ã™ã‚‹](https://ja.react.dev/reference/react/forwardRef#exposing-a-dom-node-to-the-parent-component)
-   [`ref` ãŒ props ã«](https://ja.react.dev/blog/2024/12/05/react-19#ref-as-a-prop)
-   [Next.js 15.1 ï¼ React 19 (å®‰å®šç‰ˆ)](https://nextjs.org/blog/next-15-1#react-19-stable)

